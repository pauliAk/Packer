{
  "packer": {
    "required_plugins": {
      "azure": {
        "version": ">= 1.0.0",
        "source": "github.com/hashicorp/azure"
      }
    }
  },
  "variables": {
    "client_id": "{{env `ARM_CLIENT_ID`}}",
    "client_secret": "{{env `ARM_CLIENT_SECRET`}}",
    "subscription_id": "{{env `ARM_SUBSCRIPTION_ID`}}",
    "tenant_id": "{{env `ARM_TENANT_ID`}}",
    "resource_group_name": "{{env `RESOURCE_GROUP_NAME`}}",
    "gallery_image_name": "{{env `GALLERY_IMAGE_NAME`}}",
    "winrm_password": "{{env `WINRM_PASSWORD`}}",
    "storage_account_key": "{{env `STORAGE_ACCOUNT_KEY`}}",
    "location": "West Europe",
    "gallery_name": "acgAk",
    "gallery_image_version": "1.0.1",
    "gallery_image_version_updated": "1.0.3",
    "storage_account_name": "fslogixstorage14",
    "container_name": "testinstall",
    "blob_name": "setup.exe",
    "script_to_run": "Hero.msi",
    "managed_image_nameACG": "acgImageDef2"
  },
  "source": {
    "type": "azure-arm",
    "communicator": "winrm",
    "client_id": "{{user `client_id`}}",
    "client_secret": "{{user `client_secret`}}",
    "subscription_id": "{{user `subscription_id`}}",
    "tenant_id": "{{user `tenant_id`}}",
    "managed_image_name": "myManagedImage16",
    "managed_image_resource_group_name": "{{user `resource_group_name`}}",
    "location": "{{user `location`}}",
    "vm_size": "Standard_DS2_v2",
    "os_type": "Windows",
    "winrm_username": "kun",
    "winrm_password": "{{user `winrm_password`}}",
    "winrm_use_ssl": true,
    "winrm_insecure": true,
    "winrm_timeout": "90m",
    "shared_image_gallery": {
      "subscription": "{{user `subscription_id`}}",
      "resource_group": "{{user `resource_group_name`}}",
      "gallery_name": "{{user `gallery_name`}}",
      "image_name": "{{user `gallery_image_name`}}",
      "image_version": "{{user `gallery_image_version`}}"
    },
    "shared_image_gallery_destination": {
      "gallery_name": "{{user `gallery_name`}}",
      "image_name": "{{user `gallery_image_name`}}",
      "image_version": "{{user `gallery_image_version_updated`}}",
      "resource_group": "{{user `resource_group_name`}}"
    }
  },
  "build": {
    "name": "example-build",
    "source": "source.azure-arm"
  }
}
